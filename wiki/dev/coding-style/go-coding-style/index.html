<!doctype html><html lang=en dir=ltr><head><meta name=generator content="Hugo 0.101.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Golang 编码规范指南 # 关于代码规范，每个公司、甚至每个团队都有不同的规范，并且有不同的理解。
这份编码规范是参考别的规范，结合自己的实际情况而修订的，并尝试着让身边的朋友也遵守这个。 核心的目的还是为了便于广阅读，减少可避免的 bug 和安全隐患。
如果你的代码没有办法找到下面的规范，那么就遵循标准库的规范，多阅读标准库的源码，标准库的代码可以说是写代码参考的标杆。
行长约定 # 一行最长不超过 80 个字符，超过的请使用换行展示，尽量保持格式优雅。 如果使用 vim，请确认 ~/.vimrc 中设置有 set textwidth=80
网络在线, 频次随机(由讲师时间决定)
package 名字 # 保持 package 的名字和目录保持一致，尽量采取有意义的包名，简短，有意义，尽量和标准库不要冲突。
import 规范 # import 在多行的情况下，goimports 会自动帮你格式化，但是我们这里还是规范一下import的一些规范，如果你在一个文件里面引入了一个package，还是建议采用如下格式：
import ( &#34;fmt&#34; ) 如果你的包引入了三种类型的包，标准库包，程序内部包，第三方包，建议采用如下方式进行组织你的包：
import ( &#34;encoding/json&#34; &#34;strings&#34; &#34;github.com/astaxie/beego&#34; &#34;github.com/go-sql-driver/mysql&#34; &#34;myproject/models&#34; &#34;myproject/controller&#34; &#34;myproject/utils&#34; ) 有顺序的引入包，不同的类型采用空格分离，第一种实标准库，第二是第三方包, 第三是项目包。
在项目中不要使用相对路径引入包：
import &#34;../net&#34; // 这是不好的导入 import &#34;github.com/name/repo/net&#34; // 这是正确的做法 变量申明 # 变量名采用驼峰标准，不要使用 _ 来命名变量名，多个变量申明放在一起
在函数外部申明必须使用 var,不要采用 :=，容易踩到变量的作用域的问题。
自定义类型的string循环问题 # 如果自定义的类型定义了 String 方法，那么在打印的时候会产生隐藏的一些 bug"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content><meta property="og:description" content="Golang 编码规范指南 # 关于代码规范，每个公司、甚至每个团队都有不同的规范，并且有不同的理解。
这份编码规范是参考别的规范，结合自己的实际情况而修订的，并尝试着让身边的朋友也遵守这个。 核心的目的还是为了便于广阅读，减少可避免的 bug 和安全隐患。
如果你的代码没有办法找到下面的规范，那么就遵循标准库的规范，多阅读标准库的源码，标准库的代码可以说是写代码参考的标杆。
行长约定 # 一行最长不超过 80 个字符，超过的请使用换行展示，尽量保持格式优雅。 如果使用 vim，请确认 ~/.vimrc 中设置有 set textwidth=80
网络在线, 频次随机(由讲师时间决定)
package 名字 # 保持 package 的名字和目录保持一致，尽量采取有意义的包名，简短，有意义，尽量和标准库不要冲突。
import 规范 # import 在多行的情况下，goimports 会自动帮你格式化，但是我们这里还是规范一下import的一些规范，如果你在一个文件里面引入了一个package，还是建议采用如下格式：
import ( &#34;fmt&#34; ) 如果你的包引入了三种类型的包，标准库包，程序内部包，第三方包，建议采用如下方式进行组织你的包：
import ( &#34;encoding/json&#34; &#34;strings&#34; &#34;github.com/astaxie/beego&#34; &#34;github.com/go-sql-driver/mysql&#34; &#34;myproject/models&#34; &#34;myproject/controller&#34; &#34;myproject/utils&#34; ) 有顺序的引入包，不同的类型采用空格分离，第一种实标准库，第二是第三方包, 第三是项目包。
在项目中不要使用相对路径引入包：
import &#34;../net&#34; // 这是不好的导入 import &#34;github.com/name/repo/net&#34; // 这是正确的做法 变量申明 # 变量名采用驼峰标准，不要使用 _ 来命名变量名，多个变量申明放在一起
在函数外部申明必须使用 var,不要采用 :=，容易踩到变量的作用域的问题。
自定义类型的string循环问题 # 如果自定义的类型定义了 String 方法，那么在打印的时候会产生隐藏的一些 bug"><meta property="og:type" content="article"><meta property="og:url" content="https://airdb.wiki/wiki/dev/coding-style/go-coding-style/"><meta property="article:section" content="wiki"><meta property="article:modified_time" content="2021-05-23T03:43:13+08:00"><title>Go Coding Style | Hugo Book</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.1639cc58b39d753e5ce211e45ca1950799431f352ff7bd1baadfa7fcedfe8043.css integrity="sha256-FjnMWLOddT5c4hHkXKGVB5lDHzUv970bqt+n/O3+gEM="><script defer src=/en.search.min.0bd0bf3196af08b4664a3de2ce844a9b1c591d4031f65a1b1d6dd5d1e73ad405.js integrity="sha256-C9C/MZavCLRmSj3izoRKmxxZHUAx9lobHW3V0ec61AU="></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk="></script>
<link rel=apple-touch-icon sizes=128x128 href=128x128.jpg><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?65e05e8c0631a0d2802629f8ceb31fee",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e),console.log("欢迎加入，https://airdb.dev"),console.log("Welcome，https://airdb.dev")})()</script><nav class="app-nav pc no-badge"><div class=logo><a href=//airdb.dev/ target=__blank class=dcloud-logo></a>
<a href=./ class="uniapp-logo active"></a></div><div class="search nav-search"><div class=input-wrap><input type=search id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class=clear-button><svg width="26" height="24"><circle cx="12" cy="12" r="11" fill="#ccc"/><path stroke="#fff" stroke-width="2" d="M8.25 8.25l7.5 7.5"/><path stroke="#fff" stroke-width="2" d="M8.25 15.75l7.5-7.5"/></svg></div></div><div class=results-panel></div></div><ul class=nav-url><li><a href=/wiki/osinit/>初始化</a></li><li><a href=/wiki/dev/github/>开发手册</a></li><li><a href=/wiki/kube/>云原生</a></li><li><a href=https://airdb.wiki/redoc/>APIs</a></li><li><a href=/wiki/dev/coding-style/>其他规范</a></li></ul><ul class=nav-href><li class=ext-link><a href=https://airdb.io/howto/ target=__blank>技术公益</a></li><li class=ext-link><a href=https://github.com/airdb-wiki/hugo-book/discussions target=__blank>需求墙</a></li><li><a href=//github.com/sponsors/airdb target=__blank style=color:#f60!important><img src=https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/45e691f0-4f3d-11eb-b680-7980c8a877b8.png class=heart>赞助我们</a></li></ul><div class=github><a href=//github.com/airdb-wiki/hugo-book target=_blank><img src=https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/44f8d690-4f3d-11eb-b680-7980c8a877b8.svg></a></div></nav></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><ul><li><input type=checkbox id=section-3a62918a73cf3a56ce4d8636589462fc class=toggle checked>
<label for=section-3a62918a73cf3a56ce4d8636589462fc class="flex justify-between"><a href=https://airdb.wiki/wiki/dev/>Development Handbook</a></label><ul><li><input type=checkbox id=section-9022645c6bdc551d02e2f696bac11044 class=toggle>
<label for=section-9022645c6bdc551d02e2f696bac11044 class="flex justify-between"><a href=https://airdb.wiki/wiki/dev/go/>Golang</a></label><ul><li><a href=https://airdb.wiki/wiki/dev/go/coredns/>Coredns</a></li><li><a href=https://airdb.wiki/wiki/dev/go/pprof/memory_leak/>Memory Leak</a></li><li><a href=https://airdb.wiki/wiki/dev/go/serverless-tencent/>Serverless Tencent</a></li><li><a href=https://airdb.wiki/wiki/dev/go/tools/>Tools</a></li></ul></li><li><input type=checkbox id=section-9f5b16b14bd5c881297ae5c5f97ee5ee class=toggle checked>
<label for=section-9f5b16b14bd5c881297ae5c5f97ee5ee class="flex justify-between"><a href=https://airdb.wiki/wiki/dev/coding-style/>Coding Style</a></label><ul><li><a href=https://airdb.wiki/wiki/dev/coding-style/document/>Document</a></li><li><a href=https://airdb.wiki/wiki/dev/coding-style/go-coding-style/ class=active>Go Coding Style</a></li></ul></li><li><input type=checkbox id=section-385d04790da9e055f0fb9886d58c945d class=toggle>
<label for=section-385d04790da9e055f0fb9886d58c945d class="flex justify-between"><a href=https://airdb.wiki/wiki/dev/github/>Git and Github</a></label><ul><li><a href=https://airdb.wiki/wiki/dev/github/actions/>Actions</a></li><li><a href=https://airdb.wiki/wiki/dev/github/fork/>Fork</a></li><li><a href=https://airdb.wiki/wiki/dev/github/git_branch_manage/>Git Branch Manage</a></li><li><a href=https://airdb.wiki/wiki/dev/github/how_to_github_pull_request/>How to Github Pull Request</a></li><li><a href=https://airdb.wiki/wiki/dev/github/issue/>Issue</a></li><li><a href=https://airdb.wiki/wiki/dev/github/makefile/>Makefile</a></li></ul></li><li><a href=https://airdb.wiki/wiki/dev/emoji-list/>Emoji List</a></li><li><a href=https://airdb.wiki/wiki/dev/standard/case/>Case</a></li><li><a href=https://airdb.wiki/wiki/dev/vuejs/vue-chrome-extension/>Chrome 插件制作</a></li><li><a href=https://airdb.wiki/wiki/dev/standard/sec/>DevSecOps</a></li><li><a href=https://airdb.wiki/wiki/dev/pm/>产品学习</a><ul></ul></li><li><a href=https://airdb.wiki/wiki/dev/db/>数据库</a><ul></ul></li><li><a href=https://airdb.wiki/wiki/dev/mq/>消息队列</a><ul></ul></li></ul></li><li><input type=checkbox id=section-e0cff803e5d463e167eabd49495041ea class=toggle>
<label for=section-e0cff803e5d463e167eabd49495041ea class="flex justify-between"><a href=https://airdb.wiki/wiki/part1/>工作和生活效率</a></label><ul><li><a href=https://airdb.wiki/wiki/part1/4-ways-to-learn/>4 Ways to Learn</a></li><li><a href=https://airdb.wiki/wiki/part1/efficient-communication/>Efficient Communication</a></li><li><a href=https://airdb.wiki/wiki/part1/m1-ability/>M1 Ability</a></li><li><a href=https://airdb.wiki/wiki/part1/README/>Readme</a></li><li><a href=https://airdb.wiki/wiki/part1/okr/>OKR</a><ul><li><a href=https://airdb.wiki/wiki/part1/okr/method/>工作方法或原则</a></li></ul></li><li><a href=https://airdb.wiki/wiki/part1/time-management/>时间管理</a></li></ul></li><li><input type=checkbox id=section-86bcd1fef1a2af774729755883c1d257 class=toggle>
<label for=section-86bcd1fef1a2af774729755883c1d257 class="flex justify-between"><a href=https://airdb.wiki/wiki/linux/>Linux</a></label><ul><li><input type=checkbox id=section-c0174c0c1240e2a5bb02cb5375f04b57 class=toggle>
<label for=section-c0174c0c1240e2a5bb02cb5375f04b57 class="flex justify-between"><a>Service</a></label><ul><li><a href=https://airdb.wiki/wiki/linux/service/dhcp/>DHCP</a></li><li><a href=https://airdb.wiki/wiki/linux/service/monitor/>Monitor</a></li><li><a href=https://airdb.wiki/wiki/linux/service/nginx/>Nginx</a></li></ul></li><li><input type=checkbox id=section-ec753e26065e60ec3e7698bf3aec4916 class=toggle>
<label for=section-ec753e26065e60ec3e7698bf3aec4916 class="flex justify-between"><a>Shell</a></label><ul><li><a href=https://airdb.wiki/wiki/linux/shell/bash-completion/>Bash Completion</a></li><li><a href=https://airdb.wiki/wiki/linux/shell/bash-prog/>Bash Prog</a></li><li><a href=https://airdb.wiki/wiki/linux/shell/bash/>Bash</a></li><li><a href=https://airdb.wiki/wiki/linux/shell/ssh/>SSH</a></li><li><a href=https://airdb.wiki/wiki/linux/shell/tools/>Tools</a></li><li><a href=https://airdb.wiki/wiki/linux/shell/vim/>Vim</a></li><li><a href=https://airdb.wiki/wiki/linux/shell/tcpdump/>抓包</a></li></ul></li><li><a href=https://airdb.wiki/wiki/linux/network/>网络</a></li></ul></li><li><input type=checkbox id=section-5dee0e9c4dd6c64706438ff1a2c08cf0 class=toggle>
<label for=section-5dee0e9c4dd6c64706438ff1a2c08cf0 class="flex justify-between"><a>Part2</a></label><ul><li><a href=https://airdb.wiki/wiki/part2/cicd/>Cicd</a></li><li><a href=https://airdb.wiki/wiki/part2/gateway/>Gateway</a></li><li><a href=https://airdb.wiki/wiki/part2/kube/>Kube</a></li><li><a href=https://airdb.wiki/wiki/part2/linux/>Linux</a></li><li><a href=https://airdb.wiki/wiki/part2/ops/>Ops</a></li><li><a href=https://airdb.wiki/wiki/part2/osinit/>Osinit</a></li><li><a href=https://airdb.wiki/wiki/part2/README/>Readme</a></li><li><a href=https://airdb.wiki/wiki/part2/snapcraft/>Snapcraft</a></li><li><a href=https://airdb.wiki/wiki/part2/sre/>Sre</a></li></ul></li><li><input type=checkbox id=section-994e47d5b0fb0dcd373751ce0b14cd7a class=toggle>
<label for=section-994e47d5b0fb0dcd373751ce0b14cd7a class="flex justify-between"><a>Part4</a></label><ul><li><a href=https://airdb.wiki/wiki/part4/defensive-programming/>Defensive Programming</a></li><li><a href=https://airdb.wiki/wiki/part4/exec_base64/>Exec Base64</a></li><li><a href=https://airdb.wiki/wiki/part4/crawler/>爬虫</a></li><li><a href=https://airdb.wiki/wiki/part4/ids/>用户行为安全</a><ul><li><a href=https://airdb.wiki/wiki/part4/ids/indentify-proxy/>如何识别代理</a></li></ul></li></ul></li><li><input type=checkbox id=section-540dd6c5f40a71c390a20670c6809927 class=toggle>
<label for=section-540dd6c5f40a71c390a20670c6809927 class="flex justify-between"><a href=https://airdb.wiki/wiki/kube/>Cloud Navtive</a></label><ul><li><a href=https://airdb.wiki/wiki/kube/1-kubernetes-on-macOS/>1 Kubernetes on MAC Os</a></li><li><a href=https://airdb.wiki/wiki/kube/2-ingress-exmaple/>2 Ingress Exmaple</a></li><li><a href=https://airdb.wiki/wiki/kube/5-helm/>5 Helm</a></li><li><a href=https://airdb.wiki/wiki/kube/9-faq/>9 Faq</a></li><li><a href=https://airdb.wiki/wiki/kube/helm/>Helm</a></li></ul></li><li><input type=checkbox id=section-f33cff90d5fb7513acc1f8e32fdbbc68 class=toggle>
<label for=section-f33cff90d5fb7513acc1f8e32fdbbc68 class="flex justify-between"><a href=https://airdb.wiki/wiki/osinit/>OS Setup</a></label><ul><li><a href=https://airdb.wiki/wiki/osinit/mac/>MAC</a></li><li><a href=https://airdb.wiki/wiki/osinit/ubuntu/>Ubuntu</a></li><li><a href=https://airdb.wiki/wiki/osinit/mac-faq/>MAC Faq</a></li><li><a href=https://airdb.wiki/wiki/osinit/ubuntu-faq/>Ubuntu Faq</a></li></ul></li><li><input type=checkbox id=section-d30d3ec74ebbcf69918117bd1b138f86 class=toggle>
<label for=section-d30d3ec74ebbcf69918117bd1b138f86 class="flex justify-between"><a href=https://airdb.wiki/wiki/part3/>Serverless 实战 - 无服务器编程</a></label><ul></ul></li><li><a href=https://airdb.wiki/wiki/saas/>Saas</a><ul></ul></li><li><a href=https://airdb.wiki/wiki/iot/raspberry/>Raspberry 树莓派</a></li><li><a href=https://airdb.wiki/wiki/emotion/>情感训练</a><ul><li><a href=https://airdb.wiki/wiki/emotion/l1/>内卷问题</a></li></ul></li><li><a href=https://airdb.wiki/wiki/arch/>系统架构</a><ul><li><a href=https://airdb.wiki/wiki/arch/ldc/>Ldc</a></li><li><a href=https://airdb.wiki/wiki/arch/question/>Question</a></li><li><a href=https://airdb.wiki/wiki/arch/ddd/>DDD - 领域驱动开发</a></li><li><a href=https://airdb.wiki/wiki/arch/hexagonal/>六边形实践</a></li></ul></li><li><a href=https://airdb.wiki/wiki/training/>训练板块</a><ul><li><a href=https://airdb.wiki/wiki/training/implement-a-plugin-for-coredns/>CoreDNS 插件开发</a></li><li><a href=https://airdb.wiki/wiki/training/2-disaster-recovery/>容灾方案</a></li><li><a href=https://airdb.wiki/wiki/training/3-traffic-replay/>流量录制</a></li><li><a href=https://airdb.wiki/wiki/training/1-setup-os-and-environment/>环境设置</a></li></ul></li></ul><div class=contact-item><div class=contact-smg><div>扫码添加企业微信</div><img src=https://airdb.dev/hugo-book/qrcode.png width=90 height=90></div></div></nav><script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Go Coding Style</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#golang-编码规范指南>Golang 编码规范指南</a><ul><li><a href=#行长约定>行长约定</a></li><li><a href=#package-名字>package 名字</a></li><li><a href=#import-规范>import 规范</a></li><li><a href=#变量申明>变量申明</a></li><li><a href=#自定义类型的string循环问题>自定义类型的string循环问题</a></li><li><a href=#避免返回命名的参数>避免返回命名的参数</a></li><li><a href=#错误处理>错误处理</a></li><li><a href=#error-信息>error 信息</a></li><li><a href=#长句子打印或者调用使用参数进行格式化分行>长句子打印或者调用，使用参数进行格式化分行</a></li><li><a href=#注意闭包的调用>注意闭包的调用</a></li><li><a href=#在逻辑处理中禁用-panic>在逻辑处理中禁用 panic</a></li><li><a href=#注释规范>注释规范</a></li><li><a href=#bug注释>bug注释</a></li><li><a href=#struct规范>struct规范</a></li><li><a href=#recieved是值类型还是指针类型>recieved是值类型还是指针类型</a></li><li><a href=#带-mutex-的-struct-必须是指针-receivers>带 mutex 的 struct 必须是指针 receivers</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=golang-编码规范指南>Golang 编码规范指南
<a class=anchor href=#golang-%e7%bc%96%e7%a0%81%e8%a7%84%e8%8c%83%e6%8c%87%e5%8d%97>#</a></h1><p>关于代码规范，每个公司、甚至每个团队都有不同的规范，并且有不同的理解。</p><p>这份编码规范是参考别的规范，结合自己的实际情况而修订的，并尝试着让身边的朋友也遵守这个。 核心的目的还是为了便于广阅读，减少可避免的 bug 和安全隐患。</p><p>如果你的代码没有办法找到下面的规范，那么就遵循标准库的规范，多阅读标准库的源码，标准库的代码可以说是写代码参考的标杆。</p><h2 id=行长约定>行长约定
<a class=anchor href=#%e8%a1%8c%e9%95%bf%e7%ba%a6%e5%ae%9a>#</a></h2><p>一行最长不超过 80 个字符，超过的请使用换行展示，尽量保持格式优雅。
如果使用 vim，请确认 ~/.vimrc 中设置有 set textwidth=80</p><p>网络在线, 频次随机(由讲师时间决定)</p><h2 id=package-名字>package 名字
<a class=anchor href=#package-%e5%90%8d%e5%ad%97>#</a></h2><p>保持 package 的名字和目录保持一致，尽量采取有意义的包名，简短，有意义，尽量和标准库不要冲突。</p><h2 id=import-规范>import 规范
<a class=anchor href=#import-%e8%a7%84%e8%8c%83>#</a></h2><p>import 在多行的情况下，goimports 会自动帮你格式化，但是我们这里还是规范一下import的一些规范，如果你在一个文件里面引入了一个package，还是建议采用如下格式：</p><pre><code>import (
    &quot;fmt&quot;
)
</code></pre><p>如果你的包引入了三种类型的包，标准库包，程序内部包，第三方包，建议采用如下方式进行组织你的包：</p><pre><code>import (
    &quot;encoding/json&quot;
    &quot;strings&quot;

    &quot;github.com/astaxie/beego&quot;
    &quot;github.com/go-sql-driver/mysql&quot;

    &quot;myproject/models&quot;
    &quot;myproject/controller&quot;
    &quot;myproject/utils&quot;

) 
</code></pre><p>有顺序的引入包，不同的类型采用空格分离，第一种实标准库，第二是第三方包, 第三是项目包。</p><p>在项目中不要使用相对路径引入包：</p><pre><code>import &quot;../net&quot;    // 这是不好的导入
import &quot;github.com/name/repo/net&quot; // 这是正确的做法
</code></pre><h2 id=变量申明>变量申明
<a class=anchor href=#%e5%8f%98%e9%87%8f%e7%94%b3%e6%98%8e>#</a></h2><p>变量名采用驼峰标准，不要使用 <code>_</code> 来命名变量名，多个变量申明放在一起</p><p>在函数外部申明必须使用 var,不要采用 :=，容易踩到变量的作用域的问题。</p><h2 id=自定义类型的string循环问题>自定义类型的string循环问题
<a class=anchor href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e7%b1%bb%e5%9e%8b%e7%9a%84string%e5%be%aa%e7%8e%af%e9%97%ae%e9%a2%98>#</a></h2><p>如果自定义的类型定义了 String 方法，那么在打印的时候会产生隐藏的一些 bug</p><pre><code>type MyInt int
func (m MyInt) String() string { 
    return fmt.Sprint(m)   //BUG:死循环
}

func(m MyInt) String() string { 
    return fmt.Sprint(int(m))   //这是安全的,因为我们内部进行了类型转换
}
</code></pre><h2 id=避免返回命名的参数>避免返回命名的参数
<a class=anchor href=#%e9%81%bf%e5%85%8d%e8%bf%94%e5%9b%9e%e5%91%bd%e5%90%8d%e7%9a%84%e5%8f%82%e6%95%b0>#</a></h2><p>返回变量及值，尽量在 func 行进行定义, 方便理解函数输入、输出。
func foo(a int, b int) (status, msg string, flag bool){
}</p><h2 id=错误处理>错误处理
<a class=anchor href=#%e9%94%99%e8%af%af%e5%a4%84%e7%90%86>#</a></h2><p>错误处理的原则就是不能丢弃任何有返回 err 的调用，不要采用 <code>_</code>
丢弃，必须全部处理。接到错误，要么返回 err，要么实在不行就 panic， 或者使用 Log
记录下来。</p><h2 id=error-信息>error 信息
<a class=anchor href=#error-%e4%bf%a1%e6%81%af>#</a></h2><p>error 的信息不要采用大写字母，尽量保持你的错误简短，但是要足够表达你的错误的意思。</p><h2 id=长句子打印或者调用使用参数进行格式化分行>长句子打印或者调用，使用参数进行格式化分行
<a class=anchor href=#%e9%95%bf%e5%8f%a5%e5%ad%90%e6%89%93%e5%8d%b0%e6%88%96%e8%80%85%e8%b0%83%e7%94%a8%e4%bd%bf%e7%94%a8%e5%8f%82%e6%95%b0%e8%bf%9b%e8%a1%8c%e6%a0%bc%e5%bc%8f%e5%8c%96%e5%88%86%e8%a1%8c>#</a></h2><p>我们在调用 fmt.Sprint 或者 log.Sprint 之类的函数时，有时候会遇到很长的句子，我们需要在参数调用处进行多行分割：</p><p>下面是错误的方式：
log.Printf(&ldquo;A long format string: %s %d %d %s&rdquo;, myStringParameter, len(a),
expected.Size, defrobnicate(“Anotherlongstringparameter”,
expected.Growth.Nanoseconds() / 1e6))</p><p>应该是如下的方式：</p><pre><code>log.Printf( 
    &quot;A long format string: %s %d %d %s&quot;, 
    myStringParameter,
    len(a),
    expected.Size,
    defrobnicate(
        “Anotherlongstringparameter”,
        expected.Growth.Nanoseconds() / 1e6, 
    ),
)
</code></pre><h2 id=注意闭包的调用>注意闭包的调用
<a class=anchor href=#%e6%b3%a8%e6%84%8f%e9%97%ad%e5%8c%85%e7%9a%84%e8%b0%83%e7%94%a8>#</a></h2><p>在循环中调用函数或者goroutine方法，一定要采用显示的变量调用，不要再闭包函数里面调用循环的参数</p><pre><code>for i := 0; i &lt; limit; i++ {
    go func(){ DoSomething(i) }() //错误的做法
    go func(i int){ DoSomething(i) }(i)//正确的做法
}
</code></pre><p><a href=http://golang.org/doc/articles/race_detector.html#Race_on_loop_counter>http://golang.org/doc/articles/race_detector.html#Race_on_loop_counter</a></p><h2 id=在逻辑处理中禁用-panic>在逻辑处理中禁用 panic
<a class=anchor href=#%e5%9c%a8%e9%80%bb%e8%be%91%e5%a4%84%e7%90%86%e4%b8%ad%e7%a6%81%e7%94%a8-panic>#</a></h2><p>在main包中只有当实在不可运行的情况采用panic，例如文件无法打开，数据库无法连接导致程序无法</p><p>正常运行，但是对于其他的 package 对外的接口不能有 panic，只能在包内采用。</p><p>强烈建议在main包中使用 log.Fatal 来记录错误，这样就可以由 log 来结束程序。</p><h2 id=注释规范>注释规范
<a class=anchor href=#%e6%b3%a8%e9%87%8a%e8%a7%84%e8%8c%83>#</a></h2><p>注释可以帮我们很好的完成文档的工作，写得好的注释可以方便我们以后的维护。</p><ol><li>注释符号与注释内容之前有且只有一个空格。如 // i += 2。</li><li>注释的缩进，与当前代码缩进保持一致, 禁止从首字符进行注释。</li><li>难以理解或是不符合 unix 常规的代码，需要上func 上方描述，并说明输入及输出。</li></ol><p>详细的如何写注释可以参考：http://golang.org/doc/effective_go.html#commentary</p><h2 id=bug注释>bug注释
<a class=anchor href=#bug%e6%b3%a8%e9%87%8a>#</a></h2><p>针对代码中出现的bug，可以采用如下教程使用特殊的注释，在godocs可以做到注释高亮：</p><pre><code>// BUG(dean): This divides by zero. 
var i float = 1/0
</code></pre><h2 id=struct规范>struct规范
<a class=anchor href=#struct%e8%a7%84%e8%8c%83>#</a></h2><p>struct申明和初始化格式采用多行：
定义如下：</p><pre><code>type User struct{
    Username  string
    Email     string
}
</code></pre><p>初始化如下：</p><pre><code>u := User {
    Username: &quot;dean&quot;,
    Email:    &quot;dean@airdb.com&quot;,
}
</code></pre><h2 id=recieved是值类型还是指针类型>recieved是值类型还是指针类型
<a class=anchor href=#recieved%e6%98%af%e5%80%bc%e7%b1%bb%e5%9e%8b%e8%bf%98%e6%98%af%e6%8c%87%e9%92%88%e7%b1%bb%e5%9e%8b>#</a></h2><p>到底是采用值类型还是指针类型主要参考如下原则：</p><p>func(w Win) Tally(playerPlayer) int // w不会有任何改变
func(w *Win) Tally(playerPlayer) int // w会改变数据</p><p>更多的请参考：https://code.google.com/p/go-wiki/wiki/CodeReviewComments#Receiver_Type</p><h2 id=带-mutex-的-struct-必须是指针-receivers>带 mutex 的 struct 必须是指针 receivers
<a class=anchor href=#%e5%b8%a6-mutex-%e7%9a%84-struct-%e5%bf%85%e9%a1%bb%e6%98%af%e6%8c%87%e9%92%88-receivers>#</a></h2><p>如果你定义的 struct 中带有 mutex, 那么你的 receivers 必须是指针</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/airdb-wiki/hugo-book/commit/0ef04d8f604bdf30561a12eb215e207c2752db99 title='Last modified by deancn | Sat May 22 19:43:13 UTC 2021' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Sat May 22 19:43:13 UTC 2021</span></a></div><div><a class="flex align-center" href=https://github.com/airdb-wiki/hugo-book/edit/main/exampleSite/content/wiki/dev/coding-style/go-coding-style.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#golang-编码规范指南>Golang 编码规范指南</a><ul><li><a href=#行长约定>行长约定</a></li><li><a href=#package-名字>package 名字</a></li><li><a href=#import-规范>import 规范</a></li><li><a href=#变量申明>变量申明</a></li><li><a href=#自定义类型的string循环问题>自定义类型的string循环问题</a></li><li><a href=#避免返回命名的参数>避免返回命名的参数</a></li><li><a href=#错误处理>错误处理</a></li><li><a href=#error-信息>error 信息</a></li><li><a href=#长句子打印或者调用使用参数进行格式化分行>长句子打印或者调用，使用参数进行格式化分行</a></li><li><a href=#注意闭包的调用>注意闭包的调用</a></li><li><a href=#在逻辑处理中禁用-panic>在逻辑处理中禁用 panic</a></li><li><a href=#注释规范>注释规范</a></li><li><a href=#bug注释>bug注释</a></li><li><a href=#struct规范>struct规范</a></li><li><a href=#recieved是值类型还是指针类型>recieved是值类型还是指针类型</a></li><li><a href=#带-mutex-的-struct-必须是指针-receivers>带 mutex 的 struct 必须是指针 receivers</a></li></ul></li></ul></nav></div></aside></main></body></html>