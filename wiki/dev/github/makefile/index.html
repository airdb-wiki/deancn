<!doctype html><html lang=en dir=ltr><head><meta name=generator content="Hugo 0.101.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Makefile # Command line arguments # myos = $(word 1, $@) ifndef $myos myos = &#34;$(shell uname | tr A-Z a-z)&#34; endif Examples # Go Makefile # -include .env VERSION := $(shell git describe --tags) BUILD := $(shell git rev-parse --short HEAD) PROJECTNAME := $(shell basename &#34;$(PWD)&#34;) # Go related variables. GOBASE := $(shell pwd) GOPATH := $(GOBASE)/vendor:$(GOBASE) GOBIN := $(GOBASE)/bin GOFILES := $(wildcard *.go) # Use linker flags to provide version/build settings LDFLAGS=-ldflags &#34;-X=main."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content><meta property="og:description" content="Makefile # Command line arguments # myos = $(word 1, $@) ifndef $myos myos = &#34;$(shell uname | tr A-Z a-z)&#34; endif Examples # Go Makefile # -include .env VERSION := $(shell git describe --tags) BUILD := $(shell git rev-parse --short HEAD) PROJECTNAME := $(shell basename &#34;$(PWD)&#34;) # Go related variables. GOBASE := $(shell pwd) GOPATH := $(GOBASE)/vendor:$(GOBASE) GOBIN := $(GOBASE)/bin GOFILES := $(wildcard *.go) # Use linker flags to provide version/build settings LDFLAGS=-ldflags &#34;-X=main."><meta property="og:type" content="article"><meta property="og:url" content="https://airdb.wiki/deancn/wiki/dev/github/makefile/"><meta property="article:section" content="wiki"><meta property="article:modified_time" content="2021-05-23T02:34:10+08:00"><title>Makefile | Hugo Book</title><link rel=manifest href=/deancn/manifest.json><link rel=icon href=/deancn/favicon.png type=image/x-icon><link rel=stylesheet href=/deancn/book.min.1639cc58b39d753e5ce211e45ca1950799431f352ff7bd1baadfa7fcedfe8043.css integrity="sha256-FjnMWLOddT5c4hHkXKGVB5lDHzUv970bqt+n/O3+gEM="><script defer src=/deancn/en.search.min.92a031635f1f5c7efd5ca6590639b6926274ca31de1c93c3072ad4128fa49a23.js integrity="sha256-kqAxY18fXH79XKZZBjm2kmJ0yjHeHJPDByrUEo+kmiM="></script>
<script defer src=/deancn/sw.min.88dd4d4cec151ac98d07908f50fdd7ec8f64f00877401263316930780e67e544.js integrity="sha256-iN1NTOwVGsmNB5CPUP3X7I9k8Ah3QBJjMWkweA5n5UQ="></script>
<link rel=apple-touch-icon sizes=128x128 href=128x128.jpg><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?65e05e8c0631a0d2802629f8ceb31fee",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e),console.log("欢迎加入，https://airdb.dev"),console.log("Welcome，https://airdb.dev")})()</script><nav class="app-nav pc no-badge"><div class=logo><a href=//airdb.dev/ target=__blank class=dcloud-logo></a>
<a href=./ class="uniapp-logo active"></a></div><div class="search nav-search"><div class=input-wrap><input type=search id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class=clear-button><svg width="26" height="24"><circle cx="12" cy="12" r="11" fill="#ccc"/><path stroke="#fff" stroke-width="2" d="M8.25 8.25l7.5 7.5"/><path stroke="#fff" stroke-width="2" d="M8.25 15.75l7.5-7.5"/></svg></div></div><div class=results-panel></div></div><ul class=nav-url><li><a href=/deancn/wiki/osinit/>初始化</a></li><li><a href=/deancn/wiki/dev/github/>开发手册</a></li><li><a href=/deancn/wiki/kube/>云原生</a></li><li><a href=https://airdb.wiki/redoc/>APIs</a></li><li><a href=/deancn/wiki/dev/coding-style/>其他规范</a></li></ul><ul class=nav-href><li class=ext-link><a href=https://airdb.io/howto/ target=__blank>技术公益</a></li><li class=ext-link><a href=https://github.com/airdb-wiki/hugo-book/discussions target=__blank>需求墙</a></li><li><a href=//github.com/sponsors/airdb target=__blank style=color:#f60!important><img src=https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/45e691f0-4f3d-11eb-b680-7980c8a877b8.png class=heart>赞助我们</a></li></ul><div class=github><a href=//github.com/airdb-wiki/hugo-book target=_blank><img src=https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/44f8d690-4f3d-11eb-b680-7980c8a877b8.svg></a></div></nav></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><ul><li><input type=checkbox id=section-3a62918a73cf3a56ce4d8636589462fc class=toggle checked>
<label for=section-3a62918a73cf3a56ce4d8636589462fc class="flex justify-between"><a href=https://airdb.wiki/deancn/wiki/dev/>Development Handbook</a></label><ul><li><input type=checkbox id=section-9022645c6bdc551d02e2f696bac11044 class=toggle>
<label for=section-9022645c6bdc551d02e2f696bac11044 class="flex justify-between"><a href=https://airdb.wiki/deancn/wiki/dev/go/>Golang</a></label><ul><li><a href=https://airdb.wiki/deancn/wiki/dev/go/coredns/>Coredns</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/go/pprof/memory_leak/>Memory Leak</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/go/serverless-tencent/>Serverless Tencent</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/go/tools/>Tools</a></li></ul></li><li><input type=checkbox id=section-9f5b16b14bd5c881297ae5c5f97ee5ee class=toggle>
<label for=section-9f5b16b14bd5c881297ae5c5f97ee5ee class="flex justify-between"><a href=https://airdb.wiki/deancn/wiki/dev/coding-style/>Coding Style</a></label><ul><li><a href=https://airdb.wiki/deancn/wiki/dev/coding-style/document/>Document</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/coding-style/go-coding-style/>Go Coding Style</a></li></ul></li><li><input type=checkbox id=section-385d04790da9e055f0fb9886d58c945d class=toggle checked>
<label for=section-385d04790da9e055f0fb9886d58c945d class="flex justify-between"><a href=https://airdb.wiki/deancn/wiki/dev/github/>Git and Github</a></label><ul><li><a href=https://airdb.wiki/deancn/wiki/dev/github/actions/>Actions</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/github/fork/>Fork</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/github/git_branch_manage/>Git Branch Manage</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/github/how_to_github_pull_request/>How to Github Pull Request</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/github/issue/>Issue</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/github/makefile/ class=active>Makefile</a></li></ul></li><li><a href=https://airdb.wiki/deancn/wiki/dev/emoji-list/>Emoji List</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/standard/case/>Case</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/vuejs/vue-chrome-extension/>Chrome 插件制作</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/standard/sec/>DevSecOps</a></li><li><a href=https://airdb.wiki/deancn/wiki/dev/pm/>产品学习</a><ul></ul></li><li><a href=https://airdb.wiki/deancn/wiki/dev/db/>数据库</a><ul></ul></li><li><a href=https://airdb.wiki/deancn/wiki/dev/mq/>消息队列</a><ul></ul></li></ul></li><li><input type=checkbox id=section-e0cff803e5d463e167eabd49495041ea class=toggle>
<label for=section-e0cff803e5d463e167eabd49495041ea class="flex justify-between"><a href=https://airdb.wiki/deancn/wiki/part1/>工作和生活效率</a></label><ul><li><a href=https://airdb.wiki/deancn/wiki/part1/4-ways-to-learn/>4 Ways to Learn</a></li><li><a href=https://airdb.wiki/deancn/wiki/part1/efficient-communication/>Efficient Communication</a></li><li><a href=https://airdb.wiki/deancn/wiki/part1/m1-ability/>M1 Ability</a></li><li><a href=https://airdb.wiki/deancn/wiki/part1/README/>Readme</a></li><li><a href=https://airdb.wiki/deancn/wiki/part1/okr/>OKR</a><ul><li><a href=https://airdb.wiki/deancn/wiki/part1/okr/method/>工作方法或原则</a></li></ul></li><li><a href=https://airdb.wiki/deancn/wiki/part1/time-management/>时间管理</a></li></ul></li><li><input type=checkbox id=section-86bcd1fef1a2af774729755883c1d257 class=toggle>
<label for=section-86bcd1fef1a2af774729755883c1d257 class="flex justify-between"><a href=https://airdb.wiki/deancn/wiki/linux/>Linux</a></label><ul><li><input type=checkbox id=section-c0174c0c1240e2a5bb02cb5375f04b57 class=toggle>
<label for=section-c0174c0c1240e2a5bb02cb5375f04b57 class="flex justify-between"><a>Service</a></label><ul><li><a href=https://airdb.wiki/deancn/wiki/linux/service/dhcp/>DHCP</a></li><li><a href=https://airdb.wiki/deancn/wiki/linux/service/monitor/>Monitor</a></li><li><a href=https://airdb.wiki/deancn/wiki/linux/service/nginx/>Nginx</a></li></ul></li><li><input type=checkbox id=section-ec753e26065e60ec3e7698bf3aec4916 class=toggle>
<label for=section-ec753e26065e60ec3e7698bf3aec4916 class="flex justify-between"><a>Shell</a></label><ul><li><a href=https://airdb.wiki/deancn/wiki/linux/shell/bash-completion/>Bash Completion</a></li><li><a href=https://airdb.wiki/deancn/wiki/linux/shell/bash-prog/>Bash Prog</a></li><li><a href=https://airdb.wiki/deancn/wiki/linux/shell/bash/>Bash</a></li><li><a href=https://airdb.wiki/deancn/wiki/linux/shell/ssh/>SSH</a></li><li><a href=https://airdb.wiki/deancn/wiki/linux/shell/tools/>Tools</a></li><li><a href=https://airdb.wiki/deancn/wiki/linux/shell/vim/>Vim</a></li><li><a href=https://airdb.wiki/deancn/wiki/linux/shell/tcpdump/>抓包</a></li></ul></li><li><a href=https://airdb.wiki/deancn/wiki/linux/network/>网络</a></li></ul></li><li><input type=checkbox id=section-5dee0e9c4dd6c64706438ff1a2c08cf0 class=toggle>
<label for=section-5dee0e9c4dd6c64706438ff1a2c08cf0 class="flex justify-between"><a>Part2</a></label><ul><li><a href=https://airdb.wiki/deancn/wiki/part2/cicd/>Cicd</a></li><li><a href=https://airdb.wiki/deancn/wiki/part2/gateway/>Gateway</a></li><li><a href=https://airdb.wiki/deancn/wiki/part2/kube/>Kube</a></li><li><a href=https://airdb.wiki/deancn/wiki/part2/linux/>Linux</a></li><li><a href=https://airdb.wiki/deancn/wiki/part2/ops/>Ops</a></li><li><a href=https://airdb.wiki/deancn/wiki/part2/osinit/>Osinit</a></li><li><a href=https://airdb.wiki/deancn/wiki/part2/README/>Readme</a></li><li><a href=https://airdb.wiki/deancn/wiki/part2/snapcraft/>Snapcraft</a></li><li><a href=https://airdb.wiki/deancn/wiki/part2/sre/>Sre</a></li></ul></li><li><input type=checkbox id=section-994e47d5b0fb0dcd373751ce0b14cd7a class=toggle>
<label for=section-994e47d5b0fb0dcd373751ce0b14cd7a class="flex justify-between"><a>Part4</a></label><ul><li><a href=https://airdb.wiki/deancn/wiki/part4/defensive-programming/>Defensive Programming</a></li><li><a href=https://airdb.wiki/deancn/wiki/part4/exec_base64/>Exec Base64</a></li><li><a href=https://airdb.wiki/deancn/wiki/part4/crawler/>爬虫</a></li><li><a href=https://airdb.wiki/deancn/wiki/part4/ids/>用户行为安全</a><ul><li><a href=https://airdb.wiki/deancn/wiki/part4/ids/indentify-proxy/>如何识别代理</a></li></ul></li></ul></li><li><input type=checkbox id=section-540dd6c5f40a71c390a20670c6809927 class=toggle>
<label for=section-540dd6c5f40a71c390a20670c6809927 class="flex justify-between"><a href=https://airdb.wiki/deancn/wiki/kube/>Cloud Navtive</a></label><ul><li><a href=https://airdb.wiki/deancn/wiki/kube/1-kubernetes-on-macOS/>1 Kubernetes on MAC Os</a></li><li><a href=https://airdb.wiki/deancn/wiki/kube/2-ingress-exmaple/>2 Ingress Exmaple</a></li><li><a href=https://airdb.wiki/deancn/wiki/kube/5-helm/>5 Helm</a></li><li><a href=https://airdb.wiki/deancn/wiki/kube/9-faq/>9 Faq</a></li><li><a href=https://airdb.wiki/deancn/wiki/kube/helm/>Helm</a></li></ul></li><li><input type=checkbox id=section-f33cff90d5fb7513acc1f8e32fdbbc68 class=toggle>
<label for=section-f33cff90d5fb7513acc1f8e32fdbbc68 class="flex justify-between"><a href=https://airdb.wiki/deancn/wiki/osinit/>OS Setup</a></label><ul><li><a href=https://airdb.wiki/deancn/wiki/osinit/mac/>MAC</a></li><li><a href=https://airdb.wiki/deancn/wiki/osinit/ubuntu/>Ubuntu</a></li><li><a href=https://airdb.wiki/deancn/wiki/osinit/mac-faq/>MAC Faq</a></li><li><a href=https://airdb.wiki/deancn/wiki/osinit/ubuntu-faq/>Ubuntu Faq</a></li></ul></li><li><input type=checkbox id=section-d30d3ec74ebbcf69918117bd1b138f86 class=toggle>
<label for=section-d30d3ec74ebbcf69918117bd1b138f86 class="flex justify-between"><a href=https://airdb.wiki/deancn/wiki/part3/>Serverless 实战 - 无服务器编程</a></label><ul></ul></li><li><a href=https://airdb.wiki/deancn/wiki/saas/>Saas</a><ul></ul></li><li><a href=https://airdb.wiki/deancn/wiki/iot/raspberry/>Raspberry 树莓派</a></li><li><a href=https://airdb.wiki/deancn/wiki/emotion/>情感训练</a><ul><li><a href=https://airdb.wiki/deancn/wiki/emotion/l1/>内卷问题</a></li></ul></li><li><a href=https://airdb.wiki/deancn/wiki/arch/>系统架构</a><ul><li><a href=https://airdb.wiki/deancn/wiki/arch/ldc/>Ldc</a></li><li><a href=https://airdb.wiki/deancn/wiki/arch/question/>Question</a></li><li><a href=https://airdb.wiki/deancn/wiki/arch/ddd/>DDD - 领域驱动开发</a></li><li><a href=https://airdb.wiki/deancn/wiki/arch/hexagonal/>六边形实践</a></li></ul></li><li><a href=https://airdb.wiki/deancn/wiki/training/>训练板块</a><ul><li><a href=https://airdb.wiki/deancn/wiki/training/1-setup-os-and-environment/>环境设置</a></li></ul></li></ul><div class=contact-item><div class=contact-smg><div>扫码添加企业微信</div><img src=https://airdb.dev/hugo-book/qrcode.png width=90 height=90></div></div></nav><script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/deancn/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Makefile</strong>
<label for=toc-control><img src=/deancn/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#makefile>Makefile</a><ul><li><a href=#command-line-arguments>Command line arguments</a></li><li><a href=#examples>Examples</a><ul><li><a href=#go-makefile>Go Makefile</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=makefile>Makefile
<a class=anchor href=#makefile>#</a></h1><h2 id=command-line-arguments>Command line arguments
<a class=anchor href=#command-line-arguments>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>myos <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>word 1, $@<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>ifndef $myos
</span></span><span style=display:flex><span>        myos <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>shell uname | tr A-Z a-z<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>endif
</span></span></code></pre></div><h2 id=examples>Examples
<a class=anchor href=#examples>#</a></h2><h3 id=go-makefile>Go Makefile
<a class=anchor href=#go-makefile>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>-include .env
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>VERSION :<span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>shell git describe --tags<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>BUILD :<span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>shell git rev-parse --short HEAD<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>PROJECTNAME :<span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>shell basename <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>PWD<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Go related variables.</span>
</span></span><span style=display:flex><span>GOBASE :<span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>shell pwd<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>GOPATH :<span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>GOBASE<span style=color:#66d9ef>)</span>/vendor:<span style=color:#66d9ef>$(</span>GOBASE<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>GOBIN :<span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>GOBASE<span style=color:#66d9ef>)</span>/bin
</span></span><span style=display:flex><span>GOFILES :<span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>wildcard *.go<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Use linker flags to provide version/build settings</span>
</span></span><span style=display:flex><span>LDFLAGS<span style=color:#f92672>=</span>-ldflags <span style=color:#e6db74>&#34;-X=main.Version=</span><span style=color:#66d9ef>$(</span>VERSION<span style=color:#66d9ef>)</span><span style=color:#e6db74> -X=main.Build=</span><span style=color:#66d9ef>$(</span>BUILD<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Redirect error output to a file, so we can show it in development mode.</span>
</span></span><span style=display:flex><span>STDERR :<span style=color:#f92672>=</span> /tmp/.<span style=color:#66d9ef>$(</span>PROJECTNAME<span style=color:#66d9ef>)</span>-stderr.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># PID file will keep the process id of the server</span>
</span></span><span style=display:flex><span>PID :<span style=color:#f92672>=</span> /tmp/.<span style=color:#66d9ef>$(</span>PROJECTNAME<span style=color:#66d9ef>)</span>.pid
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Make is verbose in Linux. Make it silent.</span>
</span></span><span style=display:flex><span>MAKEFLAGS <span style=color:#f92672>+=</span> --silent
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## install: Install missing dependencies. Runs `go get` internally. e.g; make install get=github.com/foo/bar</span>
</span></span><span style=display:flex><span>install: go-get
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## start: Start in development mode. Auto-starts when code changes.</span>
</span></span><span style=display:flex><span>start:
</span></span><span style=display:flex><span>	@bash -c <span style=color:#e6db74>&#34;trap &#39;make stop&#39; EXIT; </span><span style=color:#66d9ef>$(</span>MAKE<span style=color:#66d9ef>)</span><span style=color:#e6db74> clean compile start-server watch run=&#39;make clean compile start-server&#39;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## stop: Stop development mode.</span>
</span></span><span style=display:flex><span>stop: stop-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>start-server: stop-server
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;  &gt;  </span><span style=color:#66d9ef>$(</span>PROJECTNAME<span style=color:#66d9ef>)</span><span style=color:#e6db74> is available at </span><span style=color:#66d9ef>$(</span>ADDR<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>	@-<span style=color:#66d9ef>$(</span>GOBIN<span style=color:#66d9ef>)</span>/<span style=color:#66d9ef>$(</span>PROJECTNAME<span style=color:#66d9ef>)</span> 2&gt;&amp;<span style=color:#ae81ff>1</span> &amp; echo $$! &gt; <span style=color:#66d9ef>$(</span>PID<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@cat <span style=color:#66d9ef>$(</span>PID<span style=color:#66d9ef>)</span> | sed <span style=color:#e6db74>&#34;/^/s/^/  \&gt;  PID: /&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>stop-server:
</span></span><span style=display:flex><span>	@-touch <span style=color:#66d9ef>$(</span>PID<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@-kill <span style=color:#e6db74>`</span>cat <span style=color:#66d9ef>$(</span>PID<span style=color:#66d9ef>)</span><span style=color:#e6db74>`</span> 2&gt; /dev/null <span style=color:#f92672>||</span> true
</span></span><span style=display:flex><span>	@-rm <span style=color:#66d9ef>$(</span>PID<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## watch: Run given command when code changes. e.g; make watch run=&#34;echo &#39;hey&#39;&#34;</span>
</span></span><span style=display:flex><span>watch:
</span></span><span style=display:flex><span>	@GOPATH<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOPATH<span style=color:#66d9ef>)</span> GOBIN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOBIN<span style=color:#66d9ef>)</span> yolo -i . -e vendor -e bin -c <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>run<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>restart-server: stop-server start-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## compile: Compile the binary.</span>
</span></span><span style=display:flex><span>compile:
</span></span><span style=display:flex><span>	@-touch <span style=color:#66d9ef>$(</span>STDERR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@-rm <span style=color:#66d9ef>$(</span>STDERR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@-<span style=color:#66d9ef>$(</span>MAKE<span style=color:#66d9ef>)</span> -s go-compile 2&gt; <span style=color:#66d9ef>$(</span>STDERR<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	@cat <span style=color:#66d9ef>$(</span>STDERR<span style=color:#66d9ef>)</span> | sed -e <span style=color:#e6db74>&#39;1s/.*/\nError:\n/&#39;</span>  | sed <span style=color:#e6db74>&#39;s/make\[.*/ /&#39;</span> | sed <span style=color:#e6db74>&#34;/^/s/^/     /&#34;</span> 1&gt;&amp;<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## exec: Run given command, wrapped with custom GOPATH. e.g; make exec run=&#34;go test ./...&#34;</span>
</span></span><span style=display:flex><span>exec:
</span></span><span style=display:flex><span>	@GOPATH<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOPATH<span style=color:#66d9ef>)</span> GOBIN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOBIN<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>run<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## clean: Clean build files. Runs `go clean` internally.</span>
</span></span><span style=display:flex><span>clean:
</span></span><span style=display:flex><span>	@-rm <span style=color:#66d9ef>$(</span>GOBIN<span style=color:#66d9ef>)</span>/<span style=color:#66d9ef>$(</span>PROJECTNAME<span style=color:#66d9ef>)</span> 2&gt; /dev/null
</span></span><span style=display:flex><span>	@-<span style=color:#66d9ef>$(</span>MAKE<span style=color:#66d9ef>)</span> go-clean
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go-compile: go-get go-build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go-build:
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;  &gt;  Building binary...&#34;</span>
</span></span><span style=display:flex><span>	@GOPATH<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOPATH<span style=color:#66d9ef>)</span> GOBIN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOBIN<span style=color:#66d9ef>)</span> go build <span style=color:#66d9ef>$(</span>LDFLAGS<span style=color:#66d9ef>)</span> -o <span style=color:#66d9ef>$(</span>GOBIN<span style=color:#66d9ef>)</span>/<span style=color:#66d9ef>$(</span>PROJECTNAME<span style=color:#66d9ef>)</span> <span style=color:#66d9ef>$(</span>GOFILES<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go-generate:
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;  &gt;  Generating dependency files...&#34;</span>
</span></span><span style=display:flex><span>	@GOPATH<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOPATH<span style=color:#66d9ef>)</span> GOBIN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOBIN<span style=color:#66d9ef>)</span> go generate <span style=color:#66d9ef>$(</span>generate<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go-get:
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;  &gt;  Checking if there is any missing dependencies...&#34;</span>
</span></span><span style=display:flex><span>	@GOPATH<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOPATH<span style=color:#66d9ef>)</span> GOBIN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOBIN<span style=color:#66d9ef>)</span> go get <span style=color:#66d9ef>$(</span>get<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go-install:
</span></span><span style=display:flex><span>	@GOPATH<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOPATH<span style=color:#66d9ef>)</span> GOBIN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOBIN<span style=color:#66d9ef>)</span> go install <span style=color:#66d9ef>$(</span>GOFILES<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go-clean:
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;  &gt;  Cleaning build cache&#34;</span>
</span></span><span style=display:flex><span>	@GOPATH<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOPATH<span style=color:#66d9ef>)</span> GOBIN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>GOBIN<span style=color:#66d9ef>)</span> go clean
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.PHONY: help
</span></span><span style=display:flex><span>all: help
</span></span><span style=display:flex><span>help: Makefile
</span></span><span style=display:flex><span>	@echo
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34; Choose a command run in &#34;</span><span style=color:#66d9ef>$(</span>PROJECTNAME<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;:&#34;</span>
</span></span><span style=display:flex><span>	@echo
</span></span><span style=display:flex><span>	@sed -n <span style=color:#e6db74>&#39;s/^##//p&#39;</span> $&lt; | column -t -s <span style=color:#e6db74>&#39;:&#39;</span> |  sed -e <span style=color:#e6db74>&#39;s/^/ /&#39;</span>
</span></span><span style=display:flex><span>	@echo
</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/airdb-wiki/hugo-book/commit/48bc94d5ad0241243a246f66b0e1f91107fa4b21 title='Last modified by deancn | Sat May 22 18:34:10 UTC 2021' target=_blank rel=noopener><img src=/deancn/svg/calendar.svg class=book-icon alt=Calendar>
<span>Sat May 22 18:34:10 UTC 2021</span></a></div><div><a class="flex align-center" href=https://github.com/airdb-wiki/hugo-book/edit/main/exampleSite/content/wiki/dev/github/makefile.md target=_blank rel=noopener><img src=/deancn/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#makefile>Makefile</a><ul><li><a href=#command-line-arguments>Command line arguments</a></li><li><a href=#examples>Examples</a><ul><li><a href=#go-makefile>Go Makefile</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>